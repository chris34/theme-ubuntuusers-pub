/**
 * Inyoka ubuntuusers.de theme
 * 2015-01-03 17:12:45
 * https://github.com/inyokaproject/theme-ubuntuusers
 * :copyright: (c) 2007-2015 by the Inyoka Team
 * :license: BSD
 */
!function(){PrivilegeBox=function(a,b,c){this.mapping={};var d,e=[],f=this,g=$('<ul class="forums" />');this.container=$(a),$.each(b,function(a,b){var d=b[0],h=b[1],j=b[2],k=b[3];f.mapping[d]=j.concat($.map(k,function(a){return-1*a}));var l=$("<li />").text(h).attr("id","forum_"+d);(""!=j||""!=k)&&l.css("color","#E00"),g.append(l.click(function(a){var b=$(this).attr("id").split("_")[1];if(a.ctrlKey){var d=$.inArray(b,e);d>-1&&e.length>1&&e.splice(d,1),-1==d&&e.push(b)}else e=[b];if($(this).parent().children().removeClass("active"),$.each(e,function(a,b){$("#forum_"+b).addClass("active")}),1==e.length){var g=e[0];i.text($("#forum_"+g).text()),$.each(c,function(a){a=parseInt(a,10);var b;b=$.inArray(a,f.mapping[g])>-1?"1":$.inArray(-1*a,f.mapping[g])>-1?"-1":"0",$("#priv_"+a+"_"+b).attr("checked","checked")})}else i.text(e.length+" Foren"),$("input[type=radio]",f.container).attr("checked","")}))}),this.container.html(""),this.container.append(g);var h=$('<div class="privileges"></div>').appendTo(this.container),i=$("<h5 />").appendTo(h),j=$("<dl />").appendTo(h);$.each(c,function(a,b){var c=function(b,c){return $('<input type="radio" />').attr({name:"priv_"+a,value:b,id:"priv_"+a+"_"+b}).change(function(){var a=[];f.container.find("input").each(function(b,c){if("priv_"==c.name.substring(0,5)&&c.checked){var e=parseInt(c.name.substring(5),10);d=parseInt(c.value,10)*e,d&&(a[a.length]=d)}}),$.each(e,function(b,c){var d="forum_privileges_"+c,e=$("input[name="+d+"]");0===e.length&&(e=$('<input type="hidden" />').attr("name",d).appendTo(f.container)),f.mapping[c]=a,e.val(a.join(","))})}).add($("<label />").attr("for","priv_"+a+"_"+b).text(c))};j.append($("<dt />").text(b),$("<dd />").append(c(1,"Ja"),c(0,"Nicht gesetzt"),c(-1,"Nein")))}),$(g.children()[0]).click(),h.append('<span class="note">Halte die Steuerungs-Taste gedrückt, um mehrere Foren auszuwählen.</span>')}}();