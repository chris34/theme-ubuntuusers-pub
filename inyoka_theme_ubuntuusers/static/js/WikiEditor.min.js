/**
 * Inyoka ubuntuusers.de theme
 * 2015-01-03 17:12:45
 * https://github.com/inyokaproject/theme-ubuntuusers
 * :copyright: (c) 2007-2015 by the Inyoka Team
 * :license: BSD
 */
!function(){var a={text:"Code ohne Highlighting",bash:"Bash",c:"C",csharp:"C#",cpp:"C++",css:"CSS",d:"D","html+django":"Django / Jinja Templates",html:"HTML",irc:"IRC Logs",java:"Java",js:"JavaScript",perl:"Perl","html+php":"PHP",python:"Python",pycon:"Python Console Sessions",pytb:"Python Tracebacks",ruby:"Ruby",sourceslist:"sources.list",sql:"SQL",xml:"XML"},b=function(a,b,c,d,e){return function(f){return!d||$.inArray(f.profile,d)>-1?$('<a href="#" class="button" />').attr("id","button-"+a).attr("title",b).mouseover(function(a){a.preventDefault(),e.call(f,a)}).mouseout(function(a){a.preventDefault()}).append($("<span />").text(b)).click(function(a){return a.preventDefault(),c.call(f,a)}):void 0}},c=function(a,b,c,d,e,f){return function(g){if(!e||!$.inArray(g.profile,e)){var h=$("<select />").attr("id","dropdown-"+a).attr("title",b).append($('<option class="title" value="" />').text(b)).mouseover(function(a){f.call(g,a)}).mouseout(function(){}).change(function(a){d.call(g,a)});return $.each(c,function(){h.append(this)}),h[0].selectedIndex=0,h}}},d=function(a,b){return $("<option />").val(a).text(b||a)},e=function(a,b){return function(){return this.insertTag(a,"undefined"==typeof b?"Formatierter Text":b)}},f=function(){return function(){}},g=function(){return[b("bold","Fetter Text",e("'''%s'''"),["wiki","forum","small"],f("'''Text'''")),b("italic","Kursiver Text",e("''%s''"),["wiki","forum","small"],f("''Text''")),b("underlined","Unterstrichener Text",e("__%s__"),["forum","small"],f("__Text__")),b("stroke","Durchgestrichener Text",e("--(%s)--"),["forum"],f("--(Text)--")),b("monospace","Monotype",e("`%s`"),["wiki"],f("`Text`")),b("mark","Hervorgehobener Text",e("[mark]%s[/mark]"),["forum"],f("[mark]Text[/mark]")),b("wiki-link","Wiki-Link",e("[:%s:]","Seitenname"),["wiki","forum"],f("[:Seitenname:(Linktext)]")),b("external-link","Externer Link",e("[%s]","http://www.example.org/"),["wiki","forum","small"],f("[www.example.com]")),b("user-link","Benutzerlink",e("[user:%s:]","Benutzername"),["forum"],f("[user:Beispiel:]")),b("quote","Auswahl zitieren",function(){var a=this.getSelection();a.length&&this.setSelection(this.quoteText(a))},["forum"],f("Auswahl zitieren")),b("picture","Bild",e("[[Bild(%s)]]","Bildname"),["wiki","forum"],f("[[Bild(Bildname)]]")),function(c){if("small"!=c.profile){var d=$("<div />");b("pre","Codeblock",function(){return e.slideToggle("fast"),!1},["wiki","forum"],f("Code einfügen"))(c).appendTo(d);var e=$('<table class="codebox" />').appendTo(d).hide();e[0].style.display="none";var g=[$("<td>Rohtext</td>").click(function(){c.insertTag("{{{\n%s\n}}}","Code")})];$.each(a,function(a,b){g.push($("<td>"+b+"</td>").click(function(){c.insertTag("{{{#!code "+a+"\n%s\n}}}","Code")}))});for(var h=0;h<g.length/2;h++)$("<tr />").appendTo(e).append(g[h],g[h+g.length/2]);return $(document).click(function(){e.is(":visible")&&e.slideUp("fast")}),d}},function(a){if("forum"==a.profile){var c=$("<div />");b("smilies","Smilies",function(){return d.slideToggle("fast"),!1},["forum"],f("Smiley einfügen"))(a).appendTo(c);var d=$('<ul class="smileybox" />').appendTo(c).hide();return d[0].style.display="none",$.getJSON("/?__service__=wiki.get_smilies",function(b){$.each(b,function(){var b=this[0],c=this[1];$("<li />").append($("<img />").attr("src",c).attr("alt",b).click(function(){a.insertText(" "+b+" ")})).appendTo(d)})}),$(document).click(function(){d.is(":visible")&&d.slideUp("fast")}),c}},c("headline","Überschrift",[d("=","Überschrift: Stufe 1"),d("==","Überschrift: Stufe 2"),d("===","Überschrift: Stufe 3"),d("====","Überschrift: Stufe 4"),d("=====","Überschrift: Stufe 5")],function(a){var b=a.target.value;b.length>0&&this.insertTag(b+" %s "+b+"\n","Überschrift"),a.target.selectedIndex=0},["wiki"],f("= Überschrift =")),c("macro","Textbausteine",[d("[[Vorlage(InArbeit, %s)]]","in Arbeit"),d("[[Inhaltsverzeichnis(%s)]]","Inhaltsverzeichnis"),d("[[Vorlage(Getestet, %s)]]","Getestet"),d("{{{#!vorlage Paketinstallation\n{S/Paket, info}\n}}}","Paketinstallation"),d("{{{#!vorlage Befehl\n%s\n}}}","Befehl"),d("[[Vorlage(PPA, %s)]]","PPA-Vorlage"),d("{{{#!vorlage Hinweis\n%s\n}}}","Hinweis"),d('[[Vorlage(Fremd, Quelle, "%s")]]',"Fremdquelle-Warnung"),d("{{{#!vorlage Warnung\n%s\n}}}","Warnung"),d("{{{#!vorlage Experten\n%s\n}}}","Experten-Info"),d("[[Vorlage(Tasten, %s)]]","Taste"),d("{{{#!vorlage Tabelle\n{S/[:Wiki/Syntax/Tabellen:]}\n}}}","Tabelle")],function(a){a.target.value.length>0&&this.insertTag(a.target.value,""),a.target.selectedIndex=0},["wiki"],f("Textbausteine einfügen")),c("textformat","Textformat",[d("'''{S/Verzeichnisse}'''","Verzeichnisse"),d("''\"{S/Menü -> Untermenü -> Menübefehl}\"''","Menüs"),d("'''{S/Dateien}'''","Dateien"),d("`{S/Befehl}`","Befehl")],function(a){a.target.value.length>0&&this.insertTag(a.target.value,""),a.target.selectedIndex=0},["wiki"],f("Textformat einfügen")),b("shrink","Eingabefeld verkleinern",function(){var a=this.textarea.height()-50;this.textarea.height(a>=100?a:100).focus()},["forum","wiki"],f("Eingabefeld verkleinern")),b("enlarge","Eingabefeld vergrößern",function(){this.textarea.height(this.textarea.height()+50).focus()},["forum","wiki"],f("Eingabefeld vergrößern"))]};WikiEditor=Class.$extend({__init__:function(a,b){var c,d=this;this.profile=b||"small",this.username=$CURRENT_USER||"Anonymous",this.smilies=null,this.textarea=$(a),this.textarea[0].inyokaWikiEditor=this,c=$('<ul class="toolbar" />').prependTo(this.textarea.parent());for(var e,f=g(),h=0,i=f.length;h!=i;++h)(e=f[h](d))&&e.appendTo($("<li />").appendTo(c));link="wiki"==b?"http://wiki.ubuntuusers.de/Wiki/Syntax":"http://wiki.ubuntuusers.de/Forum/Syntax",$('<span class="syntax_help note"><a href="'+link+'">Hilfe zur Syntax</a></span>').appendTo($("<li />").appendTo(c))},insertTag:function(a,b){var c=this.textarea[0],d=[];a instanceof Array?d=a:-1!=a.indexOf("%s")?d=a.split("%s",2):(b=a.match(/{S\/(.+?)}/)[1],d=a.split("{S/"+b+"}",2));var e=d[0]||"",f=d[1]||"";if(scroll=c.scrollTop,"undefined"!=typeof c.selectionStart){var g=c.selectionStart,h=c.selectionEnd,i=c.value.substring(0,g),j=c.value.substring(g,h),k=c.value.substring(h);j=h!=g?e+j+f:e+b+f,c.value=i+j+k,c.focus(),c.selectionStart=g+e.length,c.selectionEnd=g+(j.length-f.length)}else if("undefined"!=typeof document.selection){c.focus();var l=document.selection.createRange(),m=l.text;l.text=e+(m.length>0?m:b)+f}c.scrollTop=scroll},getSelection:function(){var a=this.textarea[0];if("undefined"!=typeof a.selectionStart){var b=a.selectionStart,c=a.selectionEnd;return b==c?"":a.value.substring(b,c)}if("undefined"!=typeof document.selection){var d=document.selection.createRange();return d.text}},setSelection:function(a,b){var c=this.textarea[0];if("undefined"!=typeof c.selectionStart){var d=c.selectionStart,e=c.selectionEnd,f=c.value.substring(0,d),g=c.value.substring(e);c.value=f+a+g,c.focus(),b?(c.selectionStart=d,c.selectionEnd=d+a.length):c.selectionEnd=c.selectionStart=d+a.length}else if("undefined"!=typeof document.selection){c.focus();var h=document.selection.createRange();h.text=a}},insertText:function(a){var b=this.textarea[0];"undefined"!=typeof b.selectionStart&&(b.selectionStart=b.selectionEnd),this.setSelection(a)},getCurrentLine:function(){var a,b,c=this.textarea[0];if("undefined"!=typeof c.selectionStart){var d=[];for(a=c.selectionEnd-1;"\n"!=(b=c.value.charAt(a))&&b;a--)d.push(b);for(d.reverse(),a=c.selectionEnd;"\n"!=(b=c.value.charAt(a))&&b;a++)d.push(b);return d.join("")}return""},setCurrentLine:function(a){var b=this.textarea[0];if("undefined"!=typeof b.selectionStart){var c,d,e;for(c=b.selectionEnd-1;"\n"!=(e=b.value.charAt(c))&&e;c--)for(d=b.selectionEnd;"\n"!=(e=b.value.charAt(d))&&e;d++)b.value=b.value.substring(0,c)+a+b.value.substring(d);b.selectionStart=b.selectionEnd=c+a.length}},quoteText:function(a){if(!a)return"";var b=[];return $.each(a.split(/\r\n|\r|\n/),function(){b.push(">"+(">"!=this.charAt(0)?" ":"")+this)}),b.join("\n")+"\n"}})}();